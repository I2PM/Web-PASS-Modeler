(function(e){function t(t){for(var o,s,a=t[0],c=t[1],l=t[2],u=0,h=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);d&&d(t);while(h.length)h.shift()();return r.push.apply(r,l||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,s=1;s<n.length;s++){var c=n[s];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=a(a.s=n[0]))}return e}var o={},i={app:0},r=[];function s(e){return a.p+"js/"+({about:"about"}[e]||e)+"."+{about:"e568ee3c"}[e]+".js"}function a(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,o){n=i[e]=[t,o]}));t.push(n[2]=o);var r,c=document.createElement("script");c.charset="utf-8",c.timeout=120,a.nc&&c.setAttribute("nonce",a.nc),c.src=s(e);var l=new Error;r=function(t){c.onerror=c.onload=null,clearTimeout(u);var n=i[e];if(0!==n){if(n){var o=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+o+": "+r+")",l.name="ChunkLoadError",l.type=o,l.request=r,n[1](l)}i[e]=void 0}};var u=setTimeout((function(){r({type:"timeout",target:c})}),12e4);c.onerror=c.onload=r,document.head.appendChild(c)}return Promise.all(t)},a.m=e,a.c=o,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)a.d(n,o,function(t){return e[t]}.bind(null,o));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/PASS/",a.oe=function(e){throw console.error(e),e};var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var d=l;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"0481":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"#toolbar[data-v-147e0db4]{margin-bottom:12px}.title[data-v-147e0db4]{margin-bottom:0}#toolbar>button[data-v-147e0db4]{margin-right:4px;margin-left:10px}.container[data-v-147e0db4]{width:100%;margin:auto}.tabs[data-v-147e0db4]{margin-left:2px;margin-top:10px}",""])},"0b1a":function(e,t,n){"use strict";n("6020")},"26aa":function(e,t,n){var o=n("8175");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("f2f778e0",o,!0,{sourceMap:!1,shadowMode:!1})},"37ad":function(e,t,n){var o=n("95df");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("2e558d09",o,!0,{sourceMap:!1,shadowMode:!1})},"3bfa":function(e,t,n){var o=n("d3b2");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("6c6f90c5",o,!0,{sourceMap:!1,shadowMode:!1})},"43fe":function(e,t,n){"use strict";n("4d01")},"454b":function(e,t,n){"use strict";n("b856")},"4c80":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".SBD-select{padding-left:10px;padding-right:10px}.text-label{margin-left:15px;margin-right:10px}",""])},"4cab":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"#toolbar[data-v-5647d1ea]{margin-bottom:12px}.title[data-v-5647d1ea]{margin-bottom:0}#toolbar>button[data-v-5647d1ea]{margin-right:4px;margin-left:10px}.container[data-v-5647d1ea]{width:100%;margin:auto}.tabs[data-v-5647d1ea]{margin-left:1px}.el-button-group[data-v-5647d1ea]{margin-left:10px}",""])},"4d01":function(e,t,n){var o=n("fdba");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("04d1bc16",o,!0,{sourceMap:!1,shadowMode:!1})},"52fd":function(e,t,n){var o=n("aba6");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("3af2b1d8",o,!0,{sourceMap:!1,shadowMode:!1})},5587:function(e,t,n){"use strict";n("af38")},"56d7":function(e,t,n){"use strict";n.r(t);n("cadf"),n("551c"),n("f751"),n("097d");var o=n("a026"),i=n("5c96"),r=n.n(i),s=(n("0fae"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("el-tabs",{staticClass:"demo-tabs",attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.editableTabsValue,callback:function(t){e.editableTabsValue=t},expression:"editableTabsValue"}},e._l(e.subjectTabs,(function(e,t){return n("el-tab-pane",{key:e.id,attrs:{label:e.text,name:e.text}})})),1),n("router-view")],1)}),a=[],c=(n("96cf"),n("3b8d")),l=n("ec26"),u={components:{},beforeCreate:function(){this.$store.commit("initialiseStore")},data:function(){return{editableTabsValue:"2",editableTabs:[{title:"Tab 1",name:"1",content:"Tab 1 content"},{title:"Tab 2",name:"2",content:"Tab 2 content"}],tabIndex:2}},mounted:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(){return e.apply(this,arguments)}return t}(),methods:{handleClick:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:console.log(t.$vnode.key),console.log(t.label),"SID"===t.label?this.$router.push("/"):this.$router.push("/SBD/"+t.$vnode.key);case 3:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},computed:{nodes:function(){return this.$store.state.nodes},connections:function(){return this.$store.state.connections},subjectTabs:function(){return[{id:Object(l["a"])(),text:"SID"}].concat(this.$store.state.nodes).filter((function(e){return"extern"!=e.type}))}},watch:{nodes:{handler:function(){sessionStorage.setItem("store",JSON.stringify(this.$store.state))},deep:!0},connections:{handler:function(){sessionStorage.setItem("store",JSON.stringify(this.$store.state))},deep:!0}}},d=u,h=(n("f8cc"),n("2877")),f=Object(h["a"])(d,s,a,!1,null,"147e0db4",null),p=f.exports,m=n("43f9"),g=n.n(m),v=(n("51de"),n("e094"),n("20d6"),n("ac6a"),n("7514"),n("2f62")),b=n("5935");o["default"].use(v["a"]);var y=new v["a"].Store({state:{connections:[],nodes:[]},getters:{getField:b["a"],getNode:function(e){return function(t){return e.nodes.find((function(e){return e.id===t}))}},getSBD:function(e){return function(t){var n=null;return e.nodes.forEach((function(e){e.SBD.connections.find((function(e){return e.id===t}))&&(n=e)})),n}},getOutgoingMessages:function(e){return function(t,n){return e.connections.filter((function(e){return e.destination.id===n&&e.source.id===t})).map((function(e){return e.messages})).flat(1)}},getIncomingMessages:function(e){return function(t,n){return e.connections.filter((function(e){return e.destination.id===t&&e.source.id===n})).map((function(e){return e.messages})).flat(1)}}},mutations:{updateField:b["b"],initialiseStore:function(e){sessionStorage.getItem("store")&&this.replaceState(Object.assign(e,JSON.parse(sessionStorage.getItem("store"))))},set_all:function(e,t){e.connections=t["connections"],e.nodes=t["nodes"]},set_connections:function(e,t){var n=e.nodes.map((function(e){return e.id})).indexOf(t["id"]);e.nodes[n].SBD.connections=t["connections"]},set_nodes:function(e,t){var n=e.nodes.map((function(e){return e.id})).indexOf(t["id"]);e.nodes[n].SBD.nodes=t["nodes"]},reset_msg:function(e,t){var n=e.nodes.findIndex((function(e){return e.id===t["nodeID"]})),o=e.nodes[n].SBD.connections.findIndex((function(e){return e.id===t["connectionSBDID"]}));"receive"===e.nodes[n].SBD.connections[o].source.type?e.nodes[n].SBD.connections[o].receiveMsg="":"send"===e.nodes[n].SBD.connections[o].source.type&&(e.nodes[n].SBD.connections[o].sendMsg="")},set_from_to:function(e,t){var n=e.nodes.findIndex((function(e){return e.id===t["nodeID"]})),o=e.nodes[n].SBD.connections.findIndex((function(e){return e.id===t["connectionSBDID"]}));"receive"===e.nodes[n].SBD.connections[o].source.type?e.nodes[n].SBD.connections[o].receiveFrom=t["receive"]:"send"===e.nodes[n].SBD.connections[o].source.type&&(e.nodes[n].SBD.connections[o].sendTo=t["send"])}}}),x=y,C=n("8c4f"),k=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{staticClass:"toolbar"},[n("el-button",{attrs:{size:"mini"},on:{click:e.handleAddSubject}},[e._v("\n        Füge Subjekt hinzu\n      ")]),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.chart.remove()}}},[e._v("Lösche Subjekt/ Nachrichten")]),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.chart.editCurrent()}}},[e._v("\n        Bearbeite Subjekt/ Nachrichten\n      ")]),n("el-popconfirm",{attrs:{"confirm-button-text":"OK","cancel-button-text":"Abbrechen",icon:"el-icon-info","icon-color":"red",title:"Ein Import überschreibt das aktuell gespeicherte Modell. Wollen Sie trotzdem fortfahren?"},on:{confirm:function(t){return e.getFile()}}},[n("el-button",{staticClass:"import",attrs:{slot:"reference",size:"mini"},slot:"reference"},[e._v("Import")])],1),n("div",{staticStyle:{height:"0px",width:"0px",overflow:"hidden"}},[n("input",{attrs:{id:"upfile",type:"file",accept:".json"},on:{change:function(t){return e.processFile(t)}}})]),n("el-button",{staticClass:"export",attrs:{size:"mini"},on:{click:function(t){return e.handleSave()}}},[e._v("Export")])],1),n("flowchart",{ref:"chart",attrs:{nodes:e.nodes,connections:e.connections,width:2e5,height:1e3,readonly:!1},on:{editnode:e.handleEditNode,dblclick:e.handleDblClick,editconnection:e.handleEditConnection,save:e.handleChartSave,select:e.handleSelect,selectconnection:e.handleSelectConnection}}),n("node-dialog",{attrs:{visible:e.nodeDialogVisible,node:e.nodeForm.target},on:{"update:visible":function(t){e.nodeDialogVisible=t},"update:node":function(t){return e.$set(e.nodeForm,"target",t)}}}),n("connection-dialog",{attrs:{visible:e.connectionDialogVisible,connection:e.connectionForm.target,operation:e.connectionForm.operation},on:{"update:visible":function(t){e.connectionDialogVisible=t},"update:connection":function(t){return e.$set(e.connectionForm,"target",t)}}})],1)},w=[],S=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-click-outside-to-close":!1,"md-active":e.visible},on:{"update:mdActive":function(t){e.visible=t},"update:md-active":function(t){e.visible=t}}},[n("md-dialog-title",[e._v("Nachrichten")]),e._l(e.connectionForm.messages,(function(t){return n("el-tag",{key:t,staticClass:"SBD-select",attrs:{closable:"","disable-transitions":!1},on:{close:function(n){return e.handleClose(t)}}},[e._v("\n  "+e._s(t)+"\n")])})),e.inputVisible?n("el-input",{ref:"saveTagInput",staticClass:"input-new-tag",attrs:{size:"mini"},on:{blur:e.handleInputConfirm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleInputConfirm.apply(null,arguments)}},model:{value:e.inputValue,callback:function(t){e.inputValue=t},expression:"inputValue"}}):n("el-button",{staticClass:"button-new-tag",attrs:{size:"small"},on:{click:e.showInput}},[e._v("+ Neue Nachricht")]),n("div",{staticClass:"md-layout md-alignment-top-center"},[n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickSaveConnection}},[e._v("Schließen")])],1)])],2)],1)},O=[],F={props:{visible:{type:Boolean,default:!1},connection:{type:Object,default:null}},data:function(){return{inputVisible:!1,inputValue:"",connectionForm:{sourceId:null,sourcePosition:null,destinationId:null,destinationPosition:null,text:null,messages:[]}}},methods:{handleClose:function(e){this.connectionForm.messages.splice(this.connectionForm.messages.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.connectionForm.messages.push(e),this.inputVisible=!1,this.inputValue=""},handleClickSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.inputValue="",this.$emit("update:visible",!1),this.$emit("update:connection",Object.assign(this.connection,{text:this.connectionForm.text,messages:this.connectionForm.messages}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClickCancelSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.inputValue="",this.$emit("update:visible",!1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{connection:{immediate:!0,handler:function(e){e&&(this.connectionForm.id=e.id,this.connectionForm.messages=e.messages)}}}},D=F,I=(n("9b5f"),Object(h["a"])(D,S,O,!1,null,null,null)),M=I.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-click-outside-to-close":!1,"md-active":e.visible},on:{"update:mdActive":function(t){e.visible=t},"update:md-active":function(t){e.visible=t}}},[n("md-dialog-title",[e._v("Ändere Subjekt")]),n("div",{staticClass:"body"},[n("el-row",{staticClass:"SID-input"},[n("el-col",[n("label",{staticClass:"text-label"},[e._v("Name")]),n("el-input",{attrs:{placeholder:"Please input"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),n("el-row",{staticClass:"SID-input"},[n("el-col",[n("label",{staticClass:"text-label"},[e._v("ID")]),n("el-input",{attrs:{placeholder:"Please input"},model:{value:e.nodeForm.externalID,callback:function(t){e.$set(e.nodeForm,"externalID",t)},expression:"nodeForm.externalID"}})],1),n("el-row",[n("el-col",[n("label",{staticClass:"text-label"},[e._v("Type")])])],1)],1),n("el-row",{staticClass:"SID-input"},[n("el-col",[n("el-select",{attrs:{placeholder:"Select",size:"large"},model:{value:e.nodeForm.type,callback:function(t){e.$set(e.nodeForm,"type",t)},expression:"nodeForm.type"}},e._l(e.options,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),n("el-row",{staticClass:"text-label-switch"},[n("el-col",{attrs:{span:20}},[n("label",[e._v("Multi-Subjekt")]),n("el-switch",{staticClass:"ml-2",attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.nodeForm.multiSubject,callback:function(t){e.$set(e.nodeForm,"multiSubject",t)},expression:"nodeForm.multiSubject"}})],1)],1),n("el-row",{staticClass:"SID-input"},[n("el-col",[n("label",{staticClass:"text-label"},[e._v("Kommentar")]),n("el-input",{attrs:{placeholder:"Füge Kommentar hinzu","show-word-limit":"",type:"textarea"},model:{value:e.nodeForm.comment,callback:function(t){e.$set(e.nodeForm,"comment",t)},expression:"nodeForm.comment"}})],1)],1)],1),n("div",{staticClass:"md-layout md-alignment-center"},[n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickCancelSaveNode}},[e._v("Abbrechen")])],1),n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickSaveNode}},[e._v("Speichern")])],1)])],1)],1)},$=[],j=(n("7f7f"),{props:{visible:{type:Boolean,default:!1},node:{type:Object,default:null}},data:function(){return{options:[{value:"intern",label:"Intern"},{value:"extern",label:"Interface"}],nodeForm:{name:null,id:null,type:null,multiSubject:!1,externalID:null,comment:null}}},methods:{handleClickSaveNode:function(){this.$emit("update:node",Object.assign(this.node,{text:this.nodeForm.name,type:this.nodeForm.type,externalID:this.nodeForm.externalID,multiSubject:this.nodeForm.multiSubject,comment:this.nodeForm.comment})),this.$emit("update:visible",!1)},handleClickCancelSaveNode:function(){this.$emit("update:visible",!1)}},watch:{node:{immediate:!0,handler:function(e){e&&(this.nodeForm.id=e.id,this.nodeForm.name=e.text,this.nodeForm.type=e.type,this.nodeForm.externalID=e.externalID,this.nodeForm.multiSubject=e.multiSubject,this.nodeForm.comment=e.comment)}}}}),_=j,T=(n("0b1a"),Object(h["a"])(_,N,$,!1,null,"98a7d764",null)),B=T.exports,E=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{cursor:e.cursor},attrs:{id:"chart",tabindex:"0"},on:{mousemove:e.handleChartMouseMove,mouseup:e.handleChartMouseUp,dblclick:function(t){return e.handleChartDblClick(t)},mousewheel:e.handleChartMouseWheel,mousedown:function(t){return e.handleChartMouseDown(t)}}},[n("span",{staticClass:"unselectable",attrs:{id:"position"}},[e._v("\n    "+e._s(e.cursorToChartOffset.x+", "+e.cursorToChartOffset.y)+"\n  ")]),n("svg",{attrs:{id:"svg"}},[n("rect",{staticClass:"selection",attrs:{height:"0",width:"0"}})])])},P=[],A=(n("8e6e"),n("456d"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("7618")),V=(n("c7c6"),n("bd86")),R=n("75fc");n("84b4"),n("c5f6"),n("a481");function Y(e,t,n,o,i,r){var s=(o-t||1)/(n-e||1),a=t-s*e;return Math.abs(s*i-r+a)/Math.sqrt(s*s+1)}function X(e,t,n){return n>e&&n<t||n>t&&n<e}function z(e,t){return Math.abs(t-e)<=3}function L(e){var t=e.reduce((function(e,t){return t.x<e?t.x:e}),1/0),n=e.reduce((function(e,t){return t.x>e?t.x:e}),0),o=e.reduce((function(e,t){return t.y<e?t.y:e}),1/0),i=e.reduce((function(e,t){return t.y>e?t.y:e}),0);return{start:{x:t,y:o},end:{x:n,y:i}}}function q(e,t){return e.x>t.start.x&&e.x<t.end.x&&e.y>t.start.y&&e.y<t.end.y}function K(e){return e<20?20:e}function J(e,t,n,o,i,r,s,a){var c=[t,n],l=[o,i],u=e.append("path").attr("id","test").attr("stroke",s).attr("stroke-width",r).attr("fill","none").attr("d","M ".concat(c[0]," ").concat(c[1]," L ").concat(l[0]," ").concat(l[1]));return a&&u.style("stroke-dasharray",a.join(",")),u}function U(e,t,n,o,i,r,s,a,c,l){s||(s=t>o?"right":"left");var u,d=[],h=[t,n],f=[o,i],p=h[0]+(f[0]-h[0])/2,m=h[1]+(f[1]-h[1])/2,g=function(){var e=[p,u[1]],t=[p,S[1]];d.push(e),d.push(t)},v=function(){var e=[u[0],m],t=[S[0],m];d.push(e),d.push(t)},b=function(){d.push([u[0],h[1]-50]),d.push([S[0],h[1]-50])},y=function(){d.push([u[0],h[1]+50]),d.push([S[0],h[1]+50])},x=function(){d.push([h[0]+80,u[1]]),d.push([h[0]+80,S[1]])},C=function(){d.push([h[0]-80,u[1]]),d.push([h[0]-80,S[1]])},k=function(){d.push([u[0],S[1]])},w=function(){d.push([S[0],u[1]])};switch(r){case"left":u=[h[0]-20,h[1]];break;case"top":u=[h[0],h[1]-20];break;case"bottom":u=[h[0],h[1]+20];break;default:u=[h[0]+20,h[1]];break}var S=null;switch(s){case"right":S=[f[0]+20,f[1]];break;case"top":S=[f[0],f[1]-20];break;case"bottom":S=[f[0],f[1]+20];break;default:S=[f[0]-20,f[1]];break}d.push(h),d.push(u),r=r||"right",s=s||"left";var O=G(t,n,o,i);switch(O.indexOf("r")>-1&&("right"!==r&&"left"!==s||(u[0]>p&&(u[0]=p),S[0]<p&&(S[0]=p))),O.indexOf("d")>-1&&("bottom"!==r&&"top"!==s||(u[1]>m&&(u[1]=m),S[1]<m&&(S[1]=m))),O.indexOf("l")>-1&&("left"!==r&&"right"!==s||(u[0]<p&&(u[0]=p),S[0]>p&&(S[0]=p))),O.indexOf("u")>-1&&("top"!==r&&"bottom"!==s||(u[1]<m&&(u[1]=m),S[1]>m&&(S[1]=m))),O){case"lu":if("right"===r)switch(s){case"top":case"right":k();break;default:v();break}else if("bottom"===r)switch(s){case"top":g();break;default:w();break}else if("top"===r)switch(s){case"top":case"right":k();break;default:v();break}else switch(s){case"top":case"right":g();break;default:w();break}break;case"u":if("right"===r)switch(s){case"right":break;case"top":k();break;default:v();break}else if("bottom"===r)switch(s){case"left":case"right":w();break;default:x();break}else if("top"===r)switch(s){case"left":w();break;case"right":v();break;case"top":x();break;default:break}else switch(s){case"left":case"right":break;default:d.push([u[0],S[1]]);break}break;case"ru":if("right"===r)switch(s){case"left":g();break;case"top":k();break;default:w();break}else if("bottom"===r)switch(s){case"top":g();break;default:w();break}else if("top"===r)switch(s){case"right":g();break;default:k();break}else switch(s){case"left":case"top":k();break;default:v();break}break;case"l":if("right"===r)switch(s){case"left":case"right":case"top":b();break;default:y();break}else if("bottom"===r)switch(s){case"left":y();break;case"right":k();break;case"top":g();break;default:break}else if("top"===r)switch(s){case"left":b();break;case"right":k();break;case"top":break;default:g();break}else switch(s){case"left":b();break;case"right":break;default:k();break}break;case"r":if("right"===r)switch(s){case"left":break;case"right":b();break;default:k();break}else if("bottom"===r)switch(s){case"left":k();break;case"right":y();break;case"top":g();break;default:break}else if("top"===r)switch(s){case"left":w();break;case"right":b();break;case"top":break;default:g();break}else switch(s){case"left":case"right":case"top":b();break;default:y();break}break;case"ld":if("right"===r)switch(s){case"left":v();break;default:k();break}else if("bottom"===r)switch(s){case"left":w();break;case"top":v();break;default:k();break}else if("top"===r)switch(s){case"left":case"right":case"top":w();break;default:g();break}else switch(s){case"left":case"top":w();break;case"right":g();break;default:k();break}break;case"d":if("right"===r)switch(s){case"left":v();break;case"right":w();break;case"top":k();break;default:x();break}else if("bottom"===r)switch(s){case"left":case"right":w();break;case"top":break;default:x();break}else if("top"===r)switch(s){case"left":C();break;default:x();break}else switch(s){case"left":break;case"right":v();break;case"top":k();break;default:C();break}break;case"rd":"right"===r&&"left"===s?g():"right"===r&&"bottom"===s?k():"right"===r&&"top"===s||"right"===r&&"right"===s?w():"bottom"===r&&"left"===s?k():"bottom"===r&&"right"===s?w():"bottom"===r&&"top"===s?v():"bottom"===r&&"bottom"===s?k():"top"===r&&"left"===s||"top"===r&&"right"===s||"top"===r&&"top"===s?w():"top"===r&&"bottom"===s?g():"left"===r&&"left"===s?k():"left"===r&&"right"===s||"left"===r&&"top"===s?v():"left"===r&&"bottom"===s&&k();break}d.push(S),d.push(f);for(var F=[],D=[],I=0;I<d.length;I++){var M=d[I],N=d[I+1];F.push({sourceX:M[0],sourceY:M[1],destinationX:N[0],destinationY:N[1]});var $=I===d.length-2;if($&&l){var j=W(e,M[0],M[1],N[0],N[1],a,c);D.push(j);break}var _=J(e,M[0],M[1],N[0],N[1],a,c);if(D.push(_),$)break}return{lines:F,paths:D}}function W(e,t,n,o,i,r,s){var a=J(e,t,n,o,i,r,s),c="arrow"+s.replace("#","");return e.append("marker").attr("id",c).attr("markerUnits","strokeWidth").attr("viewBox","0 0 12 12").attr("refX",9).attr("refY",6).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("d","M2,2 L10,6 L2,10 L6,6 L2,2").attr("fill",s),a.attr("marker-end","url(#"+c+")"),a}function G(e,t,n,o){return n<e&&z(o,t)?"l":n>e&&z(o,t)?"r":z(n,e)&&o<t?"u":z(n,e)&&o>t?"d":n<e&&o<t?"lu":n>e&&o<t?"ru":n<e&&o>t?"ld":"rd"}var H=n("5698");n("28a5");function Z(e,t,n,o){var i=t-25;e.each((function(){var e,t=H["c"](this),o=t.text().split(/(?!$)/).reverse(),r=[],s=0,a=1.1,c=t.attr("y"),l=parseFloat(t.attr("dy")),u=t.text(null).append("tspan").attr("x",n).attr("y",c).attr("dy",l+"em");while(e=o.pop())r.push(e),u.text(r.join("")),(u.node().getComputedTextLength()>i||"-"===e)&&(r.pop(),u.text(r.join("")),r=[e],u=t.append("tspan").attr("x",n).attr("y",c).attr("dy",++s*a+l+"em").text(e))}))}function Q(e,t,n){t.width=t.width||120,t.height=t.height||140;var o=n?"#666666":"#bbbbbb",i=null;if("intern"===t.type)i=e.append("rect").attr("class","body"),i.style("width",t.width+"px").style("fill","white").style("stroke-width","1px"),i.attr("x",t.x).attr("y",t.y).attr("rx",5).style("fill","#d4e2bd"),i.style("height",t.height+"px"),i.attr("stroke",o),e.append("svg:image").attr("x",t.x+5).attr("y",t.y+2).attr("width","15px").attr("height","20px").attr("xlink:href","./assets/Subjekt.png");else{var r=["white","#dedddc"],s=e.append("defs").append("linearGradient").attr("id","grad").attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");s.selectAll("stop").data(r).enter().append("stop").style("stop-color",(function(e){return e})).attr("offset",(function(e,t){return t/(r.length-1)*100+"%"})),i=e.append("rect").attr("class","body"),i.style("width",t.width+"px").attr("stroke","black").attr("stroke-linecap","round").style("stroke-width","1px"),i.attr("x",t.x).attr("y",t.y).attr("rx",5).style("fill","url(#grad)"),i.style("height",t.height+"px"),n||i.attr("stroke-dasharray","2 5"),e.append("svg:image").attr("x",t.x+8).attr("y",t.y+3).attr("width","20px").attr("height","25px").attr("xlink:href","./assets/Interface_Subject_Symbol.png")}t.multiSubject&&(i.clone().attr("x",t.x+5).attr("y",t.y-2.5).clone().attr("x",t.x).attr("y",t.y),i.attr("x",t.x+10).attr("y",t.y-5));var a,c=t.text;a=t.y+K(t.height)/5,e.append("text").attr("x",t.x+t.width/2).attr("y",a).attr("class","unselectable").attr("text-anchor","middle").text(c).attr("dy",".71em").call(Z,t.width,t.x+t.width/2,t.y)}var ee=Q;function te(e,t,n,o,i){var r=t-30;e.each((function(){var e,t,o=H["c"](this),s=[],a=0,c=1.1,l=o.attr("y"),u=parseFloat(o.attr("dy")),d=o.text(null).append("tspan").attr("x",n-20).attr("y",l).attr("dy",u+"em");i.forEach((function(i,h){String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substr(e):t+this},i=i.insert(0,"- "),t=i.split(/\s+/).reverse();var f=t.length;while(e=t.pop())s.push(e),d.text(s.join(" ")),(d.node().getComputedTextLength()>r||t.length===f-1&&0!=h)&&(s.pop(),d.text(s.join(" ")),s=[e],d=o.append("tspan").attr("x",n-20).attr("y",l).attr("dy",++a*c+u+"em").text(e))}))}))}function ne(e,t,n){if(0!==t.messages.length){t.width=t.width||100,t.height=t.height||60;var o=n?"#666666":"#bbbbbb";if("message"==t.type){var i=180,r=e.append("rect").attr("x",t.x-t.width/2).attr("y",t.y).attr("stroke",o).attr("class","title").style("fill","#f1f3f4").style("stroke-width","1px").style("width",i+"px").attr("height","20px");e.append("svg:image").attr("x",t.x-t.width/2+5).attr("y",t.y).attr("width","15px").attr("height","20px").attr("xlink:href","./assets/Message.png");var s=e.append("text").attr("x",t.x-t.width/2).attr("y",t.y+10).text(t.text).attr("class","unselectable").attr("dy",".71em").style("fill","black").call(te,i,t.x,t.y,t.messages),a=s.node().getBBox().height+10;r.attr("height",a+"px")}}}var oe=ne;function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){Object(V["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function se(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ae(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function ae(e,t){if(e){if("string"===typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var le={name:"flowchart",props:{width:{type:[String,Number],default:1e3},height:{type:[String,Number],default:1e3},readonly:{type:Boolean,default:!1}},data:function(){return{connectingInfo:{source:null,sourcePosition:null},selectionInfo:null,currentNodes:[],currentConnections:[],cursorToChartOffset:{x:0,y:0},clickedOnce:!1,pathClickedOnce:!1,lines:[]}},methods:{add:function(e){this.readonly||(this.nodes.push(e),this.$emit("add",e,this.nodes,this.connections))},editCurrent:function(){1===this.currentNodes.length?this.editNode(this.currentNodes[0]):1===this.currentConnections.length&&this.editConnection(this.currentConnections[0])},editNode:function(e){this.readonly||this.$emit("editnode",e)},editConnection:function(e){this.readonly||this.$emit("editconnection",e)},handleChartMouseWheel:function(e){if(e.stopPropagation(),e.preventDefault(),e.ctrlKey){var t=document.getElementById("svg"),n=parseFloat(t.style.zoom||1);if(e.deltaY>0&&.1===n)return;n-=e.deltaY/100/10,t.style.zoom=n}},handleChartMouseUp:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.connectingInfo.source&&(this.hoveredConnector&&this.connectingInfo.source.id!==this.hoveredConnector.node.id&&(t=Object(l["a"])(),n={source:{id:this.connectingInfo.source.id,position:this.connectingInfo.sourcePosition},destination:{id:this.hoveredConnector.node.id,position:this.hoveredConnector.position},id:t,messages:[]},this.connections.push(n),this.$emit("connect",n,this.nodes,this.connections)),this.connectingInfo.source=null,this.connectingInfo.sourcePosition=null),this.selectionInfo&&(this.selectionInfo=null);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleChartMouseMove:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,r,s,a,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.currentTarget.getBoundingClientRect(),o=t.pageX-n.left-window.scrollX,this.cursorToChartOffset.x=Math.trunc(o),i=t.pageY-n.top-window.scrollY,this.cursorToChartOffset.y=Math.trunc(i),!this.connectingInfo.source){e.next=13;break}return e.next=8,this.renderConnections();case 8:r=se(document.querySelectorAll("#svg .connector"));try{for(r.s();!(s=r.n()).done;)a=s.value,a.classList.add("active")}catch(u){r.e(u)}finally{r.f()}c=this.getNodeConnectorOffset(this.connectingInfo.source.id,this.connectingInfo.sourcePosition),l=this.hoveredConnector?this.hoveredConnector.position:null,this.arrowTo(c.x,c.y,this.cursorToChartOffset.x,this.cursorToChartOffset.y,this.connectingInfo.sourcePosition,l);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleChartDblClick:function(e){this.readonly||this.$emit("dblclick",{x:e.offsetX,y:e.offsetY})},handleChartMouseDown:function(e){e.ctrlKey||(this.selectionInfo={x:e.offsetX,y:e.offsetY})},getConnectorPosition:function(e){var t=e.width/2,n=e.height/2,o={x:e.x+t,y:e.y},i={x:e.x,y:e.y+n},r={x:e.x+t,y:e.y+e.height},s={x:e.x+e.width,y:e.y+n};return{left:i,right:s,top:o,bottom:r}},renderSelection:function(){var e=this;if(e.selectionInfo){e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length);var t,n=L([{x:e.selectionInfo.x,y:e.selectionInfo.y},{x:e.cursorToChartOffset.x,y:e.cursorToChartOffset.y}]),o=se(document.querySelectorAll("#svg .selection"));try{for(o.s();!(t=o.n()).done;){var i=t.value;i.classList.add("active"),i.setAttribute("x",n.start.x),i.setAttribute("y",n.start.y),i.setAttribute("width",n.end.x-n.start.x),i.setAttribute("height",n.end.y-n.start.y)}}catch(c){o.e(c)}finally{o.f()}e.nodes.forEach((function(t){var o=[{x:t.x,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height}];o.some((function(e){return q(e,n)}))&&e.currentNodes.push(t)})),e.lines.forEach((function(t){var o=[{x:t.sourceX,y:t.sourceY},{x:t.destinationX,y:t.destinationY}];if(o.every((function(e){return q(e,n)}))&&e.currentConnections.every((function(e){return e.id!==t.id}))){var i=e.connections.filter((function(e){return e.id===t.id}))[0];e.currentConnections.push(i)}}))}else{var r,s=se(document.querySelectorAll("#svg > .selection"));try{for(s.s();!(r=s.n()).done;){var a=r.value;a.classList.remove("active")}}catch(c){s.e(c)}finally{s.f()}}},renderConnections:function(){var e=this;return new Promise((function(t){e.$nextTick((function(){var n,o=se(document.querySelectorAll("#svg > g.connection"));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.remove()}}catch(c){o.e(c)}finally{o.f()}e.lines=[];var r,s=se(document.querySelectorAll("#svg > g.nodeMessage"));try{for(s.s();!(r=s.n()).done;){var a=r.value;a.remove()}}catch(c){s.e(c)}finally{s.f()}e.connections.forEach((function(t){var n=e.getNodeConnectorOffset(t.source.id,t.source.position),o=e.getNodeConnectorOffset(t.destination.id,t.destination.position),i={pass:"#52c41a",reject:"red",message:"black"};e.currentConnections.filter((function(e){return e===t})).length>0&&(i={pass:"#12640a",reject:"darkred",message:"#52c41a"});var r,s=e.arrowTo(n.x,n.y,o.x,o.y,t.source.position,t.destination.position,i["message"]),a=se(s.paths);try{for(a.s();!(r=a.n()).done;){var l=r.value;l.on("mousedown",(function(n){if(H["b"].stopPropagation(),e.pathClickedOnce)e.editConnection(t);else{var o=setTimeout((function(){e.pathClickedOnce=!1,clearTimeout(o)}),300);e.pathClickedOnce=!0}e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),e.currentConnections.push(t)}))}}catch(c){a.e(c)}finally{a.f()}var u,d=se(s.lines);try{for(d.s();!(u=d.n()).done;){var h=u.value;e.lines.push({sourceX:h.sourceX,sourceY:h.sourceY,destinationX:h.destinationX,destinationY:h.destinationY,id:t.id})}}catch(c){d.e(c)}finally{d.f()}var f=e.append("g").attr("cursor","move").classed("nodeMessage",!0);if(3===s.lines.length){var p=s.lines[1].sourceX+(s.lines[2].sourceX-s.lines[1].sourceX)/2,m=s.lines[1].sourceY+(s.lines[2].sourceY-s.lines[1].sourceY)/2;oe(f,{x:p,y:m,type:"message",messages:t.messages},!1)}else oe(f,{x:s.lines[2].sourceX,y:s.lines[2].sourceY,type:"message",messages:t.messages},!1);f.on("mousedown",(function(n){if(H["b"].stopPropagation(),e.pathClickedOnce)e.editConnection(t);else{var o=setTimeout((function(){e.pathClickedOnce=!1,clearTimeout(o)}),300);e.pathClickedOnce=!0}e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),e.currentConnections.push(t)}))})),t()}))}))},renderNodes:function(){var e=this;return new Promise((function(t){var n,o=se(document.querySelectorAll("#svg > g.node"));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.remove()}}catch(r){o.e(r)}finally{o.f()}e.nodes.forEach((function(t){e.renderNode(t,e.currentNodes.filter((function(e){return e===t})).length>0)})),t()}))},getNodeConnectorOffset:function(e,t){var n=this.nodes.filter((function(t){return t.id===e}))[0];return this.getConnectorPosition(n)[t]},append:function(e){var t=H["c"]("#svg");return t.insert(e,".selection")},guideLineTo:function(e,t,n,o){var i=this.append("g");i.classed("guideline",!0),J(i,e,t,n,o,1,"#a3a3a3",[5,3])},arrowTo:function(e,t,n,o,i,r,s){var a=this.append("g");return a.classed("connection",!0),U(a,e,t,n,o,i,r,1,s||"#a3a3a3",!0),U(a,e,t,n,o,i,r,5,"transparent",!1)},renderNode:function(e,t){var n=this,o=n.append("g").attr("cursor","move").classed("node",!0);ee(o,e,t);var i=H["a"]().on("start",(function(){var t=0===n.currentNodes.filter((function(t){return t===e})).length;if(t&&(n.currentConnections.splice(0,n.currentConnections.length),n.currentNodes.splice(0,n.currentNodes.length),n.currentNodes.push(e)),n.clickedOnce)n.currentNodes.splice(0,n.currentNodes.length),n.editNode(e);else{var o=setTimeout((function(){n.clickedOnce=!1,clearTimeout(o)}),300);n.clickedOnce=!0}})).on("drag",Object(c["a"])(regeneratorRuntime.mark((function e(){var t,o,i,r,s,a,c,l,u,d,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.readonly){e.next=2;break}return e.abrupt("return");case 2:t=parseFloat(document.getElementById("svg").style.zoom||1),o=se(n.currentNodes);try{for(o.s();!(i=o.n()).done;)r=i.value,s=H["b"].dx/t,r.x+s<0&&(s=-r.x),r.x+=s,a=H["b"].dy/t,r.y+a<0&&(a=-r.y),r.y+=a}catch(p){o.e(p)}finally{o.f()}c=se(document.querySelectorAll("#svg > g.guideline"));try{for(c.s();!(l=c.n()).done;)u=l.value,u.remove()}catch(p){c.e(p)}finally{c.f()}d=n.getCurrentNodesEdge(),h=10*Math.round(Math.round(d.start.x)/10),f=10*Math.round(Math.round(d.start.y)/10),n.nodes.forEach((function(e){0===n.currentNodes.filter((function(t){return t===e})).length&&(e.x===h&&(e.y<f?n.guideLineTo(e.x,e.y+e.height,h,f):n.guideLineTo(h,f+e.height,e.x,e.y)),e.y===f&&(e.x<h?n.guideLineTo(e.x+e.width,e.y,h,f):n.guideLineTo(h+e.width,f,e.x,e.y)))}));case 11:case"end":return e.stop()}}),e)})))).on("end",(function(){var e,t=se(document.querySelectorAll("#svg > g.guideline"));try{for(t.s();!(e=t.n()).done;){var o=e.value;o.remove()}}catch(a){t.e(a)}finally{t.f()}var i,r=se(n.currentNodes);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.x=10*Math.round(Math.round(s.x)/10),s.y=10*Math.round(Math.round(s.y)/10)}}catch(a){r.e(a)}finally{r.f()}}));o.call(i),o.on("mousedown",(function(){if(H["b"].ctrlKey){var t=0===n.currentNodes.filter((function(t){return t===e})).length;t?n.currentNodes.push(e):n.currentNodes.splice(n.currentNodes.indexOf(e),1)}}));var r=[],s=this.getConnectorPosition(e),a=function(t){var i=s[t],a=o.append("circle").attr("cx",i.x).attr("cy",i.y).attr("r",4).attr("class","connector");a.on("mousedown",(function(){H["b"].stopPropagation(),n.connectingInfo.source=e,n.connectingInfo.sourcePosition=t})).on("mouseup",(function(){if(H["b"].stopPropagation(),n.connectingInfo.source){if(n.connectingInfo.source.id!==e.id){var o=Object(l["a"])(),i={source:{id:n.connectingInfo.source.id,position:n.connectingInfo.sourcePosition},destination:{id:e.id,position:t},id:o,messages:[]};n.connections.push(i),n.$emit("connect",i,n.nodes,n.connections)}n.connectingInfo.source=null,n.connectingInfo.sourcePosition=null}})).on("mouseover",(function(){a.classed("active",!0)})).on("mouseout",(function(){a.classed("active",!1)})),r.push(a)};for(var u in s)a(u);o.on("mouseover",(function(){r.forEach((function(e){return e.classed("active",!0)}))})).on("mouseout",(function(){r.forEach((function(e){return e.classed("active",!1)}))}))},getCurrentNodesEdge:function(){var e=this.currentNodes.map((function(e){return{x:e.x,y:e.y}}));return e.push.apply(e,Object(R["a"])(this.currentNodes.map((function(e){return{x:e.x+e.width,y:e.y+e.height}})))),L(e)},save:function(){this.readonly||this.$emit("save",this.nodes,this.connections)},remove:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.readonly){e.next=2;break}return e.abrupt("return");case 2:if(this.currentConnections.length>0){t=se(this.currentConnections);try{for(t.s();!(n=t.n()).done;)o=n.value,this.removeConnection(o)}catch(a){t.e(a)}finally{t.f()}this.currentConnections.splice(0,this.currentConnections.length)}if(this.currentNodes.length>0){i=se(this.currentNodes);try{for(i.s();!(r=i.n()).done;)s=r.value,this.removeNode(s)}catch(a){i.e(a)}finally{i.f()}this.currentNodes.splice(0,this.currentNodes.length)}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeNode:function(e){var t,n=this.connections.filter((function(t){return t.source.id===e.id||t.destination.id===e.id})),o=se(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;this.connections.splice(this.connections.indexOf(i),1)}}catch(r){o.e(r)}finally{o.f()}this.nodes.splice(this.nodes.indexOf(e),1),this.$emit("delete",e,this.nodes,this.connections)},removeConnection:function(e){var t=this.connections.indexOf(e);this.connections.splice(t,1),this.$emit("disconnect",e,this.nodes,this.connections)},moveCurrentNode:function(e,t){if(this.currentNodes.length>0&&!this.readonly){var n,o=se(this.currentNodes);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.x+e<0&&(e=-i.x),i.x+=e,i.y+t<0&&(t=-i.y),i.y+=t}}catch(r){o.e(r)}finally{o.f()}}}},mounted:function(){this.renderNodes(),this.renderConnections();var e=this;document.onkeydown=function(t){switch(t.keyCode){case 37:e.moveCurrentNode(-10,0);break;case 38:e.moveCurrentNode(0,-10);break;case 39:e.moveCurrentNode(10,0);break;case 40:e.moveCurrentNode(0,10);break;case 27:e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length);break;case 65:var n,o;if(document.activeElement===document.getElementById("chart"))e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),(n=e.currentNodes).push.apply(n,Object(R["a"])(e.nodes)),(o=e.currentConnections).push.apply(o,Object(R["a"])(e.connections)),t.preventDefault();break;case 46:e.remove();break;default:break}}},created:function(){},computed:re(re({},Object(v["b"])(["connections","nodes"])),{},{hoveredConnector:function(){var e,t=se(this.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value,o=this.getConnectorPosition(n);for(var i in o){var r=o[i];if(Math.hypot(r.x-this.cursorToChartOffset.x,r.y-this.cursorToChartOffset.y)<10)return{position:i,node:n}}}}catch(s){t.e(s)}finally{t.f()}return null},hoveredConnection:function(){var e,t=this,n=se(this.lines);try{var o=function(){var n=e.value,o=Y(n.sourceX,n.sourceY,n.destinationX,n.destinationY,t.cursorToChartOffset.x,t.cursorToChartOffset.y);if(o<5&&X(n.sourceX-2,n.destinationX+2,t.cursorToChartOffset.x)&&X(n.sourceY-2,n.destinationY+2,t.cursorToChartOffset.y)){var i=t.connections.filter((function(e){return e.id===n.id}));return{v:i.length>0?i[0]:null}}};for(n.s();!(e=n.n()).done;){var i=o();if("object"===Object(A["a"])(i))return i.v}}catch(r){n.e(r)}finally{n.f()}return null},cursor:function(){return this.connectingInfo.source||this.hoveredConnector?"crosshair":null!=this.hoveredConnection?"pointer":null}}),watch:{nodes:{immediate:!0,deep:!0,handler:function(){this.renderNodes(),this.renderConnections()}},connections:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}},selectionInfo:{immediate:!0,deep:!0,handler:function(){this.renderSelection()}},currentNodes:{immediate:!0,deep:!0,handler:function(){this.$emit("select",this.currentNodes),this.renderNodes()}},currentConnections:{immediate:!0,deep:!0,handler:function(){this.$emit("selectconnection",this.currentConnections),this.renderConnections()}},cursorToChartOffset:{immediate:!0,deep:!0,handler:function(){this.selectionInfo&&this.renderSelection()}},connectingInfo:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}}}},ue=le,de=(n("8412"),Object(h["a"])(ue,E,P,!1,null,null,null)),he=de.exports,fe={components:{ConnectionDialog:M,NodeDialog:B,Flowchart:he},data:function(){return{dialogVisible:!1,files:[],connections:[],nodes:[],nodeForm:{target:null},connectionForm:{target:null,operation:null},nodeDialogVisible:!1,connectionDialogVisible:!1}},methods:{getFile:function(){document.getElementById("upfile").click()},processFile:function(e){e.preventDefault();var t=new FileReader;t.onload=this.logFile,t.readAsText(e.target.files[0])},logFile:function(e){var t=e.target.result,n=JSON.parse(t);this.$store.commit("set_all",n)},handleSave:function(){var e={nodes:this.$store.state.nodes,connections:this.$store.state.connections},t="data:text/json;chatset=utf-8,".concat(encodeURIComponent(JSON.stringify(e))),n=document.createElement("a");n.href=t,n.download="PASS-Model-"+Date.now()+".json",n.click()},handleAddSubject:function(){var e=Object(l["a"])();this.$refs.chart.add({id:e,x:10,y:10,text:"Subjekt"+this.$store.state.nodes.length,type:"intern",SBD:{nodes:[],connections:[]},externalID:e,multiSubject:!1,comment:null})},handleDblClick:function(e){var t=Object(l["a"])();this.$refs.chart.add({id:t,x:10,y:10,text:"Subjekt"+this.$store.state.nodes.length,type:"intern",SBD:{nodes:[],connections:[]},externalID:t,multiSubject:!1,comment:null})},handleSelect:function(e){},handleSelectConnection:function(e){},handleChartSave:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:alert(JSON.stringify(this.$store.state.nodes)),alert(JSON.stringify(this.$store.state.connections));case 2:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleEditNode:function(e){this.nodeForm.target=e,this.nodeDialogVisible=!0},handleEditConnection:function(e){this.connectionForm.target=e,this.connectionDialogVisible=!0}},computed:{}},pe=fe,me=(n("9cea"),Object(h["a"])(pe,k,w,!1,null,"0c374eed",null)),ge=me.exports,ve=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"container"},[n("div",{attrs:{id:"toolbar"}},[n("el-button-group",[n("el-button",{attrs:{size:"mini"},on:{click:e.handleAddAction}},[e._v("Do-State")]),n("el-button",{attrs:{size:"mini"},on:{click:e.handleAddReceive}},[e._v("\n    Receive-State\n  ")]),n("el-button",{attrs:{size:"mini"},on:{click:e.handleAddSend}},[e._v("\n    Send-State\n  ")])],1),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.chart.remove()}}},[e._v("Löschen")]),n("el-button",{attrs:{size:"mini"},on:{click:function(t){return e.$refs.chart.editCurrent()}}},[e._v("\n      Bearbeiten\n    ")])],1),n("flowchart",{ref:"chart",attrs:{idSBD:e.$route.params.id,nodes:e.nodes,connections:e.connections,width:2e5,height:1e3,readonly:!1},on:{editnode:e.handleEditNode,dblclick:e.handleDblClick,editconnection:e.handleEditConnection,save:e.handleChartSave,select:e.handleSelect,selectconnection:e.handleSelectConnection}}),n("SBDNodeDialog",{attrs:{idSBD:e.$route.params.id,visible:e.nodeDialogVisible,node:e.nodeForm.target},on:{"update:visible":function(t){e.nodeDialogVisible=t},"update:node":function(t){return e.$set(e.nodeForm,"target",t)}}}),n("ActionDialog",{attrs:{visible:e.actionDialogVisible,connection:e.connectionForm.target,operation:e.connectionForm.operation,idSBD:e.$route.params.id},on:{"update:visible":function(t){e.actionDialogVisible=t},"update:connection":function(t){return e.$set(e.connectionForm,"target",t)}}}),n("SendDialog",{attrs:{visible:e.sendDialogVisible,connection:e.connectionForm.target,operation:e.connectionForm.operation,idSBD:e.$route.params.id},on:{"update:visible":function(t){e.sendDialogVisible=t},"update:connection":function(t){return e.$set(e.connectionForm,"target",t)}}}),n("ReceiveDialog",{attrs:{visible:e.receiveDialogVisible,connection:e.connectionForm.target,operation:e.connectionForm.operation,idSBD:e.$route.params.id},on:{"update:visible":function(t){e.receiveDialogVisible=t},"update:connection":function(t){return e.$set(e.connectionForm,"target",t)}}})],1)},be=[],ye=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-click-outside-to-close":!1,"md-active":e.visible},on:{"update:mdActive":function(t){e.visible=t},"update:md-active":function(t){e.visible=t}}},[n("md-dialog-title",[e._v("Do-State")]),n("el-row",{staticClass:"text-label-switch"},[n("el-col",[n("el-input",{attrs:{placeholder:"","show-word-limit":"",type:"textarea"},model:{value:e.connectionForm.actionMsg,callback:function(t){e.$set(e.connectionForm,"actionMsg",t)},expression:"connectionForm.actionMsg"}})],1)],1),n("div",{staticClass:"md-layout md-alignment-center"},[n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickCancelSaveConnection}},[e._v("Abbrechen")])],1),n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickSaveConnection}},[e._v("Speichern")])],1)])],1)],1)},xe=[],Ce={props:{idSBD:{type:String},visible:{type:Boolean,default:!1},connection:{type:Object,default:null}},data:function(){return{inputVisible:!1,inputValue:"",connectionForm:{sourceId:null,sourcePosition:null,destinationId:null,destinationPosition:null,text:null,messages:[],actionMsg:""}}},methods:{handleClickSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.inputValue="",this.$emit("update:visible",!1),this.$emit("update:connection",Object.assign(this.connection,{text:this.connectionForm.text,messages:this.connectionForm.actionMsg,actionMsg:this.connectionForm.actionMsg}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClickCancelSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.inputValue="",this.$emit("update:visible",!1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{connection:{immediate:!0,handler:function(e){e&&(this.connectionForm.id=e.id,this.connectionForm.messages=e.messages,this.connectionForm.actionMsg=e.actionMsg)}}}},ke=Ce,we=(n("74ee"),Object(h["a"])(ke,ye,xe,!1,null,null,null)),Se=we.exports,Oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-click-outside-to-close":!1,"md-active":e.visible},on:{"update:mdActive":function(t){e.visible=t},"update:md-active":function(t){e.visible=t}}},[n("md-dialog-title",[e._v("Versendete Nachrichten")]),n("label",{staticClass:"text-label"},[e._v("To")]),n("el-select",{staticClass:"SBD-select",attrs:{"no-data-text":"Keine Subjekte vorhanden",placeholder:"Select",size:"large"},on:{change:e.optionsToChange},model:{value:e.connectionForm.sendTo,callback:function(t){e.$set(e.connectionForm,"sendTo",t)},expression:"connectionForm.sendTo"}},e._l(e.optionsSendTo,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("label",{staticClass:"text-label"},[e._v("Message")]),n("el-select",{staticClass:"SBD-select",attrs:{disabled:""===e.connectionForm.sendTo,placeholder:"Select","no-data-text":"Keine Nachrichten vorhanden",size:"large"},model:{value:e.connectionForm.sendMsg,callback:function(t){e.$set(e.connectionForm,"sendMsg",t)},expression:"connectionForm.sendMsg"}},e._l(e.optionsSendMsg,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("div",{staticClass:"md-layout md-alignment-center"},[n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickCancelSaveConnection}},[e._v("Abbrechen")])],1),n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickSaveConnection}},[e._v("Speichern")])],1)])],1)],1)},Fe=[],De=(n("6762"),n("2fdb"),n("4f7f"),{props:{idSBD:{type:String},visible:{type:Boolean,default:!1},connection:{type:Object,default:null}},data:function(){return{inputVisible:!1,inputValue:"",connectionForm:{sourceId:null,sourcePosition:null,destinationId:null,destinationPosition:null,text:null,messages:[],sendTo:"",sendMsg:""}}},computed:{optionsSendTo:function(){var e=this,t=this,n=this.$store.state.connections.filter((function(t){return t.source.id===e.idSBD})).map((function(e){return e.destination.id})),o=Object(R["a"])(new Set(n));return o.map((function(e){return Object.create({value:e,label:t.$store.state.nodes.find((function(t){return t.id===e})).text})}))},optionsSendMsg:function(){var e=this;if(this.connectionForm.sendTo){var t=this.$store.state.connections.filter((function(t){return t.source.id===e.idSBD&&t.destination.id===e.connectionForm.sendTo})).map((function(e){return e.messages})).flat(1);return t.map((function(e){return Object.create({value:e,label:e})}))}}},methods:{resetChangeSubject:function(){this.optionsSendMsg.includes(this.connectionForm.sendMsg)||(this.connectionForm.sendMsg="")},optionsToChange:function(){this.connectionForm.sendMsg=""},handleClose:function(e){this.connectionForm.messages.splice(this.connectionForm.messages.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.connectionForm.messages.push(e),this.inputVisible=!1,this.inputValue=""},handleClickSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.inputValue="",this.$emit("update:visible",!1),this.$emit("update:connection",Object.assign(this.connection,{messages:["To: "+this.connectionForm.sendTo,"Msg: "+this.connectionForm.sendMsg],sendTo:this.connectionForm.sendTo,sendMsg:this.connectionForm.sendMsg}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClickCancelSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("update:visible",!1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{connection:{immediate:!0,handler:function(e){console.log(e),e&&(this.connectionForm.id=e.id,this.connectionForm.messages=e.messages,this.connectionForm.sendTo=e.sendTo,this.connectionForm.sendMsg=e.sendMsg)}}}}),Ie=De,Me=(n("5587"),Object(h["a"])(Ie,Oe,Fe,!1,null,null,null)),Ne=Me.exports,$e=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-click-outside-to-close":!1,"md-active":e.visible},on:{"update:mdActive":function(t){e.visible=t},"update:md-active":function(t){e.visible=t}}},[n("md-dialog-title",[e._v("Empfangene Nachricht")]),n("label",{staticClass:"text-label"},[e._v("From")]),n("el-select",{staticClass:"SBD-select",attrs:{"no-data-text":"Keine Subjekte vorhanden",placeholder:"Select",size:"large"},on:{change:e.resetChangeSubject},model:{value:e.connectionForm.receiveFrom,callback:function(t){e.$set(e.connectionForm,"receiveFrom",t)},expression:"connectionForm.receiveFrom"}},e._l(e.optionsReceiveFrom,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("label",{staticClass:"text-label"},[e._v("Message")]),n("el-select",{staticClass:"SBD-select",attrs:{disabled:""===e.connectionForm.receiveFrom,placeholder:"Select","no-data-text":"Keine Nachrichten vorhanden",size:"large"},model:{value:e.connectionForm.receiveMsg,callback:function(t){e.$set(e.connectionForm,"receiveMsg",t)},expression:"connectionForm.receiveMsg"}},e._l(e.optionsReceiveMsg,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),n("div",{staticClass:"md-layout md-alignment-center"},[n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickCancelSaveConnection}},[e._v("Abbrechen")])],1),n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickSaveConnection}},[e._v("Speichern")])],1)])],1)],1)},je=[],_e={props:{idSBD:{type:String},visible:{type:Boolean,default:!1},connection:{type:Object,default:null}},data:function(){return{inputVisible:!1,inputValue:"",connectionForm:{sourceId:null,sourcePosition:null,destinationId:null,destinationPosition:null,text:null,messages:[],receiveFrom:"",receiveMsg:""}}},computed:{optionsReceiveFrom:function(){var e=this,t=this,n=this.$store.state.connections.filter((function(t){return t.destination.id===e.idSBD})).map((function(e){return e.source.id})),o=Object(R["a"])(new Set(n));return o.map((function(e){return Object.create({value:e,label:t.$store.state.nodes.find((function(t){return t.id===e})).text})}))},optionsReceiveMsg:function(){var e=this;if(this.connectionForm.receiveFrom){var t=this.$store.state.connections.filter((function(t){return t.destination.id===e.idSBD&&t.source.id===e.connectionForm.receiveFrom})).map((function(e){return e.messages})).flat(1);return t.map((function(e){return Object.create({value:e,label:e})}))}}},methods:{resetChangeSubject:function(){this.optionsReceiveMsg.includes(this.connectionForm.receiveMsg)||(this.connectionForm.receiveMsg="")},optionsFromChange:function(){this.connectionForm.receiveMsg=""},handleClose:function(e){this.connectionForm.messages.splice(this.connectionForm.messages.indexOf(e),1)},showInput:function(){var e=this;this.inputVisible=!0,this.$nextTick((function(t){e.$refs.saveTagInput.$refs.input.focus()}))},handleInputConfirm:function(){var e=this.inputValue;e&&this.connectionForm.messages.push(e),this.inputVisible=!1,this.inputValue=""},handleClickSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.inputValue="",this.$emit("update:visible",!1),this.$emit("update:connection",Object.assign(this.connection,{messages:["From: "+this.connectionForm.receiveFrom,"Msg: "+this.connectionForm.receiveMsg],receiveFrom:this.connectionForm.receiveFrom,receiveMsg:this.connectionForm.receiveMsg}));case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleClickCancelSaveConnection:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$emit("update:visible",!1);case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},watch:{connection:{immediate:!0,handler:function(e){console.log(e),e&&(this.connectionForm.id=e.id,this.connectionForm.messages=e.messages,this.connectionForm.receiveFrom=e.receiveFrom,this.connectionForm.receiveMsg=e.receiveMsg)}}}},Te=_e,Be=(n("43fe"),Object(h["a"])(Te,$e,je,!1,null,null,null)),Ee=Be.exports,Pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("md-dialog",{attrs:{"md-click-outside-to-close":!1,"md-active":e.visible},on:{"update:mdActive":function(t){e.visible=t},"update:md-active":function(t){e.visible=t}}},[n("md-dialog-title",[e._v("Ändere Zustand")]),n("div",{staticClass:"body"},[n("el-row",{staticClass:"SBD-input"},[n("el-col",[n("label",{staticClass:"text-label"},[e._v("Name")]),n("el-input",{attrs:{placeholder:"Please input"},model:{value:e.nodeForm.name,callback:function(t){e.$set(e.nodeForm,"name",t)},expression:"nodeForm.name"}})],1)],1),n("el-row",{staticClass:"SBD-input"},[n("el-col",[n("label",{staticClass:"text-label"},[e._v("ID")]),n("el-input",{attrs:{placeholder:"Please input"},model:{value:e.nodeForm.externalID,callback:function(t){e.$set(e.nodeForm,"externalID",t)},expression:"nodeForm.externalID"}})],1)],1),n("el-row",[n("el-col",[n("label",{staticClass:"text-label-select"},[e._v("State")])])],1),n("el-row",{staticClass:"SBD-input"},[n("el-col",[n("el-select",{attrs:{multiple:"",placeholder:"Füge State hinzu",size:"large"},model:{value:e.nodeForm.state,callback:function(t){e.$set(e.nodeForm,"state",t)},expression:"nodeForm.state"}},e._l(e.optionsState,(function(e){return n("el-option",{key:e.value,attrs:{label:e.label,value:e.value,disabled:e.disabled}})})),1)],1)],1),n("el-row",{staticClass:"SBD-input"},[n("el-col",[n("label",{staticClass:"text-label"},[e._v("Kommentar")]),n("el-input",{attrs:{placeholder:"Füge Kommentar hinzu","show-word-limit":"",type:"textarea"},model:{value:e.nodeForm.comment,callback:function(t){e.$set(e.nodeForm,"comment",t)},expression:"nodeForm.comment"}})],1)],1)],1),n("div",{staticClass:"md-layout md-alignment-center"},[n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickCancelSaveNode}},[e._v("Abbrechen")])],1),n("div",{staticClass:"md-layout-item "},[n("md-button",{on:{click:e.handleClickSaveNode}},[e._v("Speichern")])],1)])],1)],1)},Ae=[],Ve={props:{idSBD:{type:String},visible:{type:Boolean,default:!1},node:{type:Object,default:null}},data:function(){return{options:[{value:"intern",label:"Intern"},{value:"extern",label:"Extern"}],nodeForm:{name:null,id:null,type:null,externalID:null,comment:null,state:null}}},computed:{optionsState:function(){var e=this,t=["Start"],n=[],o=this.$store.state.nodes.find((function(t){return t.id===e.idSBD})).SBD.nodes.filter((function(t){return t.id!=e.nodeForm.id})).map((function(e){return e.state})).flat(1);return t.forEach((function(t){o.includes(t)||"send"===e.nodeForm.type&&"End"===t?n.push(Object.create({value:t,label:t,disabled:!0})):n.push(Object.create({value:t,label:t,disabled:!1}))})),"send"===this.nodeForm.type?n.push(Object.create({value:"End",label:"End",disabled:!0})):n.push(Object.create({value:"End",label:"End",disabled:!1})),n}},methods:{handleClickSaveNode:function(){this.$emit("update:node",Object.assign(this.node,{text:this.nodeForm.name,externalID:this.nodeForm.externalID,comment:this.nodeForm.comment,state:this.nodeForm.state})),this.$emit("update:visible",!1)},handleClickCancelSaveNode:function(){this.$emit("update:visible",!1)}},watch:{node:{immediate:!0,handler:function(e){e&&(this.nodeForm.id=e.id,this.nodeForm.type=e.type,this.nodeForm.name=e.text,this.nodeForm.externalID=e.externalID,this.nodeForm.comment=e.comment,this.nodeForm.state=e.state)}}}},Re=Ve,Ye=(n("454b"),Object(h["a"])(Re,Pe,Ae,!1,null,"5e81b791",null)),Xe=Ye.exports,ze=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{style:{cursor:e.cursor},attrs:{id:"chart",tabindex:"0"},on:{mousemove:e.handleChartMouseMove,mouseup:e.handleChartMouseUp,dblclick:function(t){return e.handleChartDblClick(t)},mousewheel:e.handleChartMouseWheel,mousedown:function(t){return e.handleChartMouseDown(t)}}},[n("span",{staticClass:"unselectable",attrs:{id:"position"}},[e._v("\n    "+e._s(e.cursorToChartOffset.x+", "+e.cursorToChartOffset.y)+"\n  ")]),n("svg",{attrs:{id:"svg"}},[n("rect",{staticClass:"selection",attrs:{height:"0",width:"0"}})])])},Le=[];function qe(e,t,n,o){var i=t-25;e.each((function(){var e,t=H["c"](this),o=t.text().split(/(?!$)/).reverse(),r=[],s=0,a=1.1,c=t.attr("y"),l=parseFloat(t.attr("dy")),u=t.text(null).append("tspan").attr("x",n).attr("y",c).attr("dy",l+"em");while(e=o.pop())r.push(e),u.text(r.join("")),(u.node().getComputedTextLength()>i||"-"===e)&&(r.pop(),u.text(r.join("")),r=[e],u=t.append("tspan").attr("x",n).attr("y",c).attr("dy",++s*a+l+"em").text(e))}))}function Ke(e,t,n){t.width=t.width||140,t.height=t.height||70;var o=n?"#666666":"#bbbbbb";if("action"===t.type){var i=e.append("rect").attr("class","body");i.style("width",t.width+"px").style("fill","white").style("stroke-width","1px"),i.attr("x",t.x).attr("y",t.y).attr("rx",5).style("fill","#fdff7f"),i.style("height",t.height+"px"),i.attr("stroke",o),e.append("svg:image").attr("x",t.x+12).attr("y",t.y+4).attr("width","21px").attr("height","21px").attr("xlink:href","../assets/Do_state_Symbol.png")}if("receive"===t.type){var r=e.append("rect").attr("class","body");r.style("width",t.width+"px").style("fill","white").style("stroke-width","1px"),r.attr("x",t.x).attr("y",t.y).attr("rx",5).style("fill","#dc9691"),r.style("height",t.height+"px"),r.attr("stroke",o),e.append("svg:image").attr("x",t.x+12).attr("y",t.y+4).attr("width","21px").attr("height","21px").attr("xlink:href","../assets/Receive.png")}if("send"===t.type){var s=e.append("rect").attr("class","body");s.style("width",t.width+"px").style("fill","white").style("stroke-width","1px"),s.attr("x",t.x).attr("y",t.y).attr("rx",5).style("fill","#cddeb1"),s.style("height",t.height+"px"),s.attr("stroke",o),e.append("svg:image").attr("x",t.x+12).attr("y",t.y+4).attr("width","21px").attr("height","21px").attr("xlink:href","../assets/Send.png")}t.state&&(t.state.includes("Start")&&t.state.includes("End")?(e.append("svg:image").attr("x",t.x+100).attr("y",t.y+2).attr("width","20px").attr("height","25px").attr("xlink:href","../assets/End_State_Symbol.png"),e.append("svg:image").attr("x",t.x+70).attr("y",t.y+2).attr("width","20px").attr("height","25px").attr("xlink:href","../assets/Start_State_Symbol.png")):t.state.includes("End")?e.append("svg:image").attr("x",t.x+100).attr("y",t.y+2).attr("width","20px").attr("height","25px").attr("xlink:href","../assets/End_State_Symbol.png"):t.state.includes("Start")&&t.state.includes("Start")&&e.append("svg:image").attr("x",t.x+100).attr("y",t.y+2).attr("width","20px").attr("height","25px").attr("xlink:href","../assets/Start_State_Symbol.png"));var a,c=t.text;a=t.y+K(t.height)/5;e.append("text").attr("x",t.x+t.width/2).attr("y",a+15).attr("class","unselectable").attr("text-anchor","middle").text(c).attr("dy",".71em").call(qe,t.width,t.x+t.width/2,t.y)}var Je=Ke;function Ue(e,t,n,o){var i=t;e.each((function(){var e,t=H["c"](this),o=t.text().split(/(?!$)/).reverse(),r=[],s=0,a=1.1,c=t.attr("y"),l=parseFloat(t.attr("dy")),u=t.text(null).append("tspan").attr("x",n).attr("y",c).attr("dy",l+"em");while(e=o.pop())r.push(e),u.text(r.join("")),(u.node().getComputedTextLength()>i||"-"===e)&&(r.pop(),u.text(r.join("")),r=[e],u=t.append("tspan").attr("x",n).attr("y",c).attr("dy",++s*a+l+"em").text(e))}))}function We(e,t,n,o,i){var r=t-30;e.each((function(){var e,t,o=H["c"](this),s=[],a=0,c=1.1,l=o.attr("y"),u=parseFloat(o.attr("dy")),d=o.text(null).append("tspan").attr("x",n-40).attr("y",l).attr("dy",u+"em");i.forEach((function(i,h){String.prototype.insert=function(e,t){return e>0?this.substring(0,e)+t+this.substr(e):t+this},t=i.split(/\s+/).reverse();var f=t.length;while(e=t.pop())s.push(e),d.text(s.join(" ")),(d.node().getComputedTextLength()>r||t.length===f-1&&0!=h)&&(s.pop(),d.text(s.join(" ")),s=[e],d=o.append("tspan").attr("x",n-40).attr("y",l).attr("dy",++a*c+u+"em").text(e))}))}))}function Ge(e,t,n){if(0!==t.messages.length){t.width=t.width||100,t.height=t.height||60;var o=n?"#666666":"#bbbbbb";if("send"===t.type||"receive"===t.type||"action"===t.type)var i=180,r=e.append("rect").attr("x",t.x-t.width/2).attr("y",t.y).attr("stroke",o).attr("class","title").style("fill","#f1f3f4").style("stroke-width","1px").style("width",i+"px").attr("height","20px");if("action"===t.type){var s,a=t.messages;s=t.y+K(t.height)/5;var c=e.append("text").attr("x",t.x+10).attr("y",s).attr("class","unselectable").attr("text-anchor","middle").text(a).attr("dy",".71em").call(Ue,t.width+60,t.x+40,t.y),l=c.node().getBBox().height+20;r.attr("height",l+"px")}else{var u=e.append("text").attr("x",t.x-t.width/2).attr("y",t.y+10).text(t.text).attr("class","unselectable").attr("dy",".71em").style("fill","black").call(We,i,t.x,t.y,t.messages),d=u.node().getBBox().height+10;r.attr("height",d+"px")}}}var He=Ge;function Ze(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Qe(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,a=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){a=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(a)throw r}}}}function Qe(e,t){if(e){if("string"===typeof e)return et(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?et(e,t):void 0}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var tt={name:"flowchart",props:{idSBD:{type:String},width:{type:[String,Number],default:1e3},height:{type:[String,Number],default:1e3},readonly:{type:Boolean,default:!1}},data:function(){return{connectingInfo:{source:null,sourcePosition:null},selectionInfo:null,currentNodes:[],currentConnections:[],cursorToChartOffset:{x:0,y:0},clickedOnce:!1,pathClickedOnce:!1,lines:[]}},methods:{add:function(e){this.readonly||(this.nodes.push(e),this.$emit("add",e,this.nodes,this.connections))},editCurrent:function(){1===this.currentNodes.length?this.editNode(this.currentNodes[0]):1===this.currentConnections.length&&this.editConnection(this.currentConnections[0])},editNode:function(e){this.readonly||this.$emit("editnode",e)},editConnection:function(e){this.readonly||this.$emit("editconnection",e)},handleChartMouseWheel:function(e){if(e.stopPropagation(),e.preventDefault(),e.ctrlKey){var t=document.getElementById("svg"),n=parseFloat(t.style.zoom||1);if(e.deltaY>0&&.1===n)return;n-=e.deltaY/100/10,t.style.zoom=n}},handleChartMouseUp:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.connectingInfo.source&&(this.hoveredConnector&&this.connectingInfo.source.id!==this.hoveredConnector.node.id&&(t=Object(l["a"])(),n={source:{id:this.connectingInfo.source.id,position:this.connectingInfo.sourcePosition,type:this.connectingInfo.source.type},destination:{id:this.hoveredConnector.node.id,position:this.hoveredConnector.position},id:t,messages:[]},"send"===this.connectingInfo.source.type?(n["sendTo"]="",n["sendMsg"]="",n["messages"]=["To:","Msg:"]):"receive"===this.connectingInfo.source.type?(n["receiveFrom"]="",n["receiveMsg"]="",n["messages"]=["From:","Msg:"]):"action"===this.connectingInfo.source.type&&(n["actionMsg"]=""),this.connections.push(n),this.$emit("connect",n,this.nodes,this.connections)),this.connectingInfo.source=null,this.connectingInfo.sourcePosition=null),this.selectionInfo&&(this.selectionInfo=null);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),handleChartMouseMove:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t){var n,o,i,r,s,a,c,l;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.currentTarget.getBoundingClientRect(),o=t.pageX-n.left-window.scrollX,this.cursorToChartOffset.x=Math.trunc(o),i=t.pageY-n.top-window.scrollY,this.cursorToChartOffset.y=Math.trunc(i),!this.connectingInfo.source){e.next=13;break}return e.next=8,this.renderConnections();case 8:r=Ze(document.querySelectorAll("#svg .connector"));try{for(r.s();!(s=r.n()).done;)a=s.value,a.classList.add("active")}catch(u){r.e(u)}finally{r.f()}c=this.getNodeConnectorOffset(this.connectingInfo.source.id,this.connectingInfo.sourcePosition),l=this.hoveredConnector?this.hoveredConnector.position:null,this.arrowTo(c.x,c.y,this.cursorToChartOffset.x,this.cursorToChartOffset.y,this.connectingInfo.sourcePosition,l);case 13:case"end":return e.stop()}}),e,this)})));function t(t){return e.apply(this,arguments)}return t}(),handleChartDblClick:function(e){this.readonly||this.$emit("dblclick",{x:e.offsetX,y:e.offsetY})},handleChartMouseDown:function(e){e.ctrlKey||(this.selectionInfo={x:e.offsetX,y:e.offsetY})},getConnectorPosition:function(e){var t=e.width/2,n=e.height/2,o={x:e.x+t,y:e.y},i={x:e.x,y:e.y+n},r={x:e.x+t,y:e.y+e.height},s={x:e.x+e.width,y:e.y+n};return{left:i,right:s,top:o,bottom:r}},renderSelection:function(){var e=this;if(e.selectionInfo){e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length);var t,n=L([{x:e.selectionInfo.x,y:e.selectionInfo.y},{x:e.cursorToChartOffset.x,y:e.cursorToChartOffset.y}]),o=Ze(document.querySelectorAll("#svg .selection"));try{for(o.s();!(t=o.n()).done;){var i=t.value;i.classList.add("active"),i.setAttribute("x",n.start.x),i.setAttribute("y",n.start.y),i.setAttribute("width",n.end.x-n.start.x),i.setAttribute("height",n.end.y-n.start.y)}}catch(c){o.e(c)}finally{o.f()}e.nodes.forEach((function(t){var o=[{x:t.x,y:t.y},{x:t.x,y:t.y+t.height},{x:t.x+t.width,y:t.y},{x:t.x+t.width,y:t.y+t.height}];o.some((function(e){return q(e,n)}))&&e.currentNodes.push(t)})),e.lines.forEach((function(t){var o=[{x:t.sourceX,y:t.sourceY},{x:t.destinationX,y:t.destinationY}];if(o.every((function(e){return q(e,n)}))&&e.currentConnections.every((function(e){return e.id!==t.id}))){var i=e.connections.filter((function(e){return e.id===t.id}))[0];e.currentConnections.push(i)}}))}else{var r,s=Ze(document.querySelectorAll("#svg > .selection"));try{for(s.s();!(r=s.n()).done;){var a=r.value;a.classList.remove("active")}}catch(c){s.e(c)}finally{s.f()}}},renderConnections:function(){var e=this;return new Promise((function(t){e.$nextTick((function(){var n,o=Ze(document.querySelectorAll("#svg > g.connection"));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.remove()}}catch(p){o.e(p)}finally{o.f()}e.lines=[];var r,s=Ze(document.querySelectorAll("#svg > g.sendMessage"));try{for(s.s();!(r=s.n()).done;){var a=r.value;a.remove()}}catch(p){s.e(p)}finally{s.f()}var c,l=Ze(document.querySelectorAll("#svg > g.receiveMessage"));try{for(l.s();!(c=l.n()).done;){var u=c.value;u.remove()}}catch(p){l.e(p)}finally{l.f()}var d,h=Ze(document.querySelectorAll("#svg > g.actionMessage"));try{for(h.s();!(d=h.n()).done;){var f=d.value;f.remove()}}catch(p){h.e(p)}finally{h.f()}e.connections.forEach((function(t){var n=e.getNodeConnectorOffset(t.source.id,t.source.position),o=e.getNodeConnectorOffset(t.destination.id,t.destination.position),i={pass:"#52c41a",reject:"red",message:"black"};e.currentConnections.filter((function(e){return e===t})).length>0&&(i={pass:"#12640a",reject:"darkred",message:"#52c41a"});var r,s=e.arrowTo(n.x,n.y,o.x,o.y,t.source.position,t.destination.position,i["message"]),a=Ze(s.paths);try{for(a.s();!(r=a.n()).done;){var c=r.value;c.on("mousedown",(function(n){if(H["b"].stopPropagation(),e.pathClickedOnce)e.editConnection(t);else{var o=setTimeout((function(){e.pathClickedOnce=!1,clearTimeout(o)}),300);e.pathClickedOnce=!0}e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),e.currentConnections.push(t)}))}}catch(p){a.e(p)}finally{a.f()}var l,u=Ze(s.lines);try{for(u.s();!(l=u.n()).done;){var d=l.value;e.lines.push({sourceX:d.sourceX,sourceY:d.sourceY,destinationX:d.destinationX,destinationY:d.destinationY,id:t.id})}}catch(p){u.e(p)}finally{u.f()}var h=null,f=[];if("receive"===t.source.type?(h=e.append("g").attr("cursor","move").classed("receiveMessage",!0),e.$store.getters.getNode(t.receiveFrom)?(f.push("From: "+e.$store.getters.getNode(t.receiveFrom).text),e.$store.getters.getOutgoingMessages(t.receiveFrom,e.$store.getters.getSBD(t.id).id).includes(t.receiveMsg)?f.push("Msg: "+t.receiveMsg):(f.push("Msg: "),e.$store.commit("reset_msg",{nodeID:e.$store.getters.getSBD(t.id).id,connectionSBDID:t.id}))):(f=["From: ","Msg: "],e.$store.commit("reset_msg",{nodeID:e.$store.getters.getSBD(t.id).id,connectionSBDID:t.id}),e.$store.commit("set_from_to",{nodeID:e.$store.getters.getSBD(t.id).id,connectionSBDID:t.id,receive:""}))):"send"===t.source.type?(h=e.append("g").attr("cursor","move").classed("sendMessage",!0),e.$store.getters.getNode(t.sendTo)?(f.push("To: "+e.$store.getters.getNode(t.sendTo).text),e.$store.getters.getIncomingMessages(t.sendTo,e.$store.getters.getSBD(t.id).id).includes(t.sendMsg)?f.push("Msg: "+t.sendMsg):(f.push("Msg: "),e.$store.commit("reset_msg",{nodeID:e.$store.getters.getSBD(t.id).id,connectionSBDID:t.id}))):(f=["From: ","Msg: "],e.$store.commit("reset_msg",{nodeID:e.$store.getters.getSBD(t.id).id,connectionSBDID:t.id}),e.$store.commit("set_from_to",{nodeID:e.$store.getters.getSBD(t.id).id,connectionSBDID:t.id,send:""}))):(h=e.append("g").attr("cursor","move").classed("actionMessage",!0),f=t.messages),3===s.lines.length){var m=s.lines[1].sourceX+(s.lines[2].sourceX-s.lines[1].sourceX)/2,g=s.lines[1].sourceY+(s.lines[2].sourceY-s.lines[1].sourceY)/2;He(h,{x:m,y:g,type:t.source.type,messages:f},!1)}else He(h,{x:s.lines[2].sourceX,y:s.lines[2].sourceY,type:t.source.type,messages:f},!1);h.on("mousedown",(function(n){if(H["b"].stopPropagation(),e.pathClickedOnce)e.editConnection(t);else{var o=setTimeout((function(){e.pathClickedOnce=!1,clearTimeout(o)}),300);e.pathClickedOnce=!0}e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),e.currentConnections.push(t)}))})),t()}))}))},renderNodes:function(){var e=this;return new Promise((function(t){var n,o=Ze(document.querySelectorAll("#svg > g.node"));try{for(o.s();!(n=o.n()).done;){var i=n.value;i.remove()}}catch(r){o.e(r)}finally{o.f()}e.nodes.forEach((function(t){e.renderNode(t,e.currentNodes.filter((function(e){return e===t})).length>0)})),t()}))},getNodeConnectorOffset:function(e,t){var n=this.nodes.filter((function(t){return t.id===e}))[0];return this.getConnectorPosition(n)[t]},append:function(e){var t=H["c"]("#svg");return t.insert(e,".selection")},guideLineTo:function(e,t,n,o){var i=this.append("g");i.classed("guideline",!0),J(i,e,t,n,o,1,"#a3a3a3",[5,3])},arrowTo:function(e,t,n,o,i,r,s){var a=this.append("g");return a.classed("connection",!0),U(a,e,t,n,o,i,r,1,s||"#a3a3a3",!0),U(a,e,t,n,o,i,r,5,"transparent",!1)},renderNode:function(e,t){var n=this,o=n.append("g").attr("cursor","move").classed("node",!0);Je(o,e,t);var i=H["a"]().on("start",(function(){var t=0===n.currentNodes.filter((function(t){return t===e})).length;if(t&&(n.currentConnections.splice(0,n.currentConnections.length),n.currentNodes.splice(0,n.currentNodes.length),n.currentNodes.push(e)),n.clickedOnce)n.currentNodes.splice(0,n.currentNodes.length),n.editNode(e);else{var o=setTimeout((function(){n.clickedOnce=!1,clearTimeout(o)}),300);n.clickedOnce=!0}})).on("drag",Object(c["a"])(regeneratorRuntime.mark((function e(){var t,o,i,r,s,a,c,l,u,d,h,f;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!n.readonly){e.next=2;break}return e.abrupt("return");case 2:t=parseFloat(document.getElementById("svg").style.zoom||1),o=Ze(n.currentNodes);try{for(o.s();!(i=o.n()).done;)r=i.value,s=H["b"].dx/t,r.x+s<0&&(s=-r.x),r.x+=s,a=H["b"].dy/t,r.y+a<0&&(a=-r.y),r.y+=a}catch(p){o.e(p)}finally{o.f()}c=Ze(document.querySelectorAll("#svg > g.guideline"));try{for(c.s();!(l=c.n()).done;)u=l.value,u.remove()}catch(p){c.e(p)}finally{c.f()}d=n.getCurrentNodesEdge(),h=10*Math.round(Math.round(d.start.x)/10),f=10*Math.round(Math.round(d.start.y)/10),n.nodes.forEach((function(e){0===n.currentNodes.filter((function(t){return t===e})).length&&(e.x===h&&(e.y<f?n.guideLineTo(e.x,e.y+e.height,h,f):n.guideLineTo(h,f+e.height,e.x,e.y)),e.y===f&&(e.x<h?n.guideLineTo(e.x+e.width,e.y,h,f):n.guideLineTo(h+e.width,f,e.x,e.y)))}));case 11:case"end":return e.stop()}}),e)})))).on("end",(function(){var e,t=Ze(document.querySelectorAll("#svg > g.guideline"));try{for(t.s();!(e=t.n()).done;){var o=e.value;o.remove()}}catch(a){t.e(a)}finally{t.f()}var i,r=Ze(n.currentNodes);try{for(r.s();!(i=r.n()).done;){var s=i.value;s.x=10*Math.round(Math.round(s.x)/10),s.y=10*Math.round(Math.round(s.y)/10)}}catch(a){r.e(a)}finally{r.f()}}));o.call(i),o.on("mousedown",(function(){if(H["b"].ctrlKey){var t=0===n.currentNodes.filter((function(t){return t===e})).length;t?n.currentNodes.push(e):n.currentNodes.splice(n.currentNodes.indexOf(e),1)}}));var r=[],s=this.getConnectorPosition(e),a=function(t){var i=s[t],a=o.append("circle").attr("cx",i.x).attr("cy",i.y).attr("r",4).attr("class","connector");a.on("mousedown",(function(){H["b"].stopPropagation(),n.connectingInfo.source=e,n.connectingInfo.sourcePosition=t})).on("mouseup",(function(){if(H["b"].stopPropagation(),n.connectingInfo.source){if(n.connectingInfo.source.id!==e.id){var o=Object(l["a"])(),i={source:{id:n.connectingInfo.source.id,position:n.connectingInfo.sourcePosition,type:n.connectingInfo.source.type},destination:{id:e.id,position:t},id:o,messages:[]};"send"===n.connectingInfo.source.type?(i["sendTo"]="",i["sendMsg"]="",i["messages"]=["To:","Msg:"]):"receive"===n.connectingInfo.source.type&&(i["receiveFrom"]="",i["receiveMsg"]="",i["messages"]=["From:","Msg:"]),n.connections.push(i),n.$emit("connect",i,n.nodes,n.connections)}n.connectingInfo.source=null,n.connectingInfo.sourcePosition=null}})).on("mouseover",(function(){a.classed("active",!0)})).on("mouseout",(function(){a.classed("active",!1)})),r.push(a)};for(var u in s)a(u);o.on("mouseover",(function(){r.forEach((function(e){return e.classed("active",!0)}))})).on("mouseout",(function(){r.forEach((function(e){return e.classed("active",!1)}))}))},getCurrentNodesEdge:function(){var e=this.currentNodes.map((function(e){return{x:e.x,y:e.y}}));return e.push.apply(e,Object(R["a"])(this.currentNodes.map((function(e){return{x:e.x+e.width,y:e.y+e.height}})))),L(e)},save:function(){this.readonly||this.$emit("save",this.nodes,this.connections)},remove:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(){var t,n,o,i,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.readonly){e.next=2;break}return e.abrupt("return");case 2:if(this.currentConnections.length>0){t=Ze(this.currentConnections);try{for(t.s();!(n=t.n()).done;)o=n.value,this.removeConnection(o)}catch(a){t.e(a)}finally{t.f()}this.currentConnections.splice(0,this.currentConnections.length)}if(this.currentNodes.length>0){i=Ze(this.currentNodes);try{for(i.s();!(r=i.n()).done;)s=r.value,this.removeNode(s)}catch(a){i.e(a)}finally{i.f()}this.currentNodes.splice(0,this.currentNodes.length)}case 4:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),removeNode:function(e){var t,n=this.connections.filter((function(t){return t.source.id===e.id||t.destination.id===e.id})),o=Ze(n);try{for(o.s();!(t=o.n()).done;){var i=t.value;this.connections.splice(this.connections.indexOf(i),1)}}catch(r){o.e(r)}finally{o.f()}this.nodes.splice(this.nodes.indexOf(e),1),this.$emit("delete",e,this.nodes,this.connections)},removeConnection:function(e){var t=this.connections.indexOf(e);this.connections.splice(t,1),this.$emit("disconnect",e,this.nodes,this.connections)},moveCurrentNode:function(e,t){if(this.currentNodes.length>0&&!this.readonly){var n,o=Ze(this.currentNodes);try{for(o.s();!(n=o.n()).done;){var i=n.value;i.x+e<0&&(e=-i.x),i.x+=e,i.y+t<0&&(t=-i.y),i.y+=t}}catch(r){o.e(r)}finally{o.f()}}}},mounted:function(){this.renderNodes(),this.renderConnections();var e=this;document.onkeydown=function(t){switch(t.keyCode){case 37:e.moveCurrentNode(-10,0);break;case 38:e.moveCurrentNode(0,-10);break;case 39:e.moveCurrentNode(10,0);break;case 40:e.moveCurrentNode(0,10);break;case 27:e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length);break;case 65:var n,o;if(document.activeElement===document.getElementById("chart"))e.currentNodes.splice(0,e.currentNodes.length),e.currentConnections.splice(0,e.currentConnections.length),(n=e.currentNodes).push.apply(n,Object(R["a"])(e.nodes)),(o=e.currentConnections).push.apply(o,Object(R["a"])(e.connections)),t.preventDefault();break;case 46:e.remove();break;default:break}}},created:function(){},computed:{connections:{get:function(){var e=this;return this.$store.state.nodes.find((function(t){return t.id===e.idSBD})).SBD.connections},set:function(e){return this.$store.dispatch("set_connections",{id:this.idSBD,connections:e})}},nodes:{get:function(){var e=this;return this.$store.state.nodes.find((function(t){return t.id===e.idSBD})).SBD.nodes},set:function(e){return this.$store.commit("set_nodes",{id:this.idSBD,nodes:e})}},hoveredConnector:function(){var e,t=Ze(this.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value,o=this.getConnectorPosition(n);for(var i in o){var r=o[i];if(Math.hypot(r.x-this.cursorToChartOffset.x,r.y-this.cursorToChartOffset.y)<10)return{position:i,node:n}}}}catch(s){t.e(s)}finally{t.f()}return null},hoveredConnection:function(){var e,t=this,n=Ze(this.lines);try{var o=function(){var n=e.value,o=Y(n.sourceX,n.sourceY,n.destinationX,n.destinationY,t.cursorToChartOffset.x,t.cursorToChartOffset.y);if(o<5&&X(n.sourceX-2,n.destinationX+2,t.cursorToChartOffset.x)&&X(n.sourceY-2,n.destinationY+2,t.cursorToChartOffset.y)){var i=t.connections.filter((function(e){return e.id===n.id}));return{v:i.length>0?i[0]:null}}};for(n.s();!(e=n.n()).done;){var i=o();if("object"===Object(A["a"])(i))return i.v}}catch(r){n.e(r)}finally{n.f()}return null},cursor:function(){return this.connectingInfo.source||this.hoveredConnector?"crosshair":null!=this.hoveredConnection?"pointer":null}},watch:{nodes:{immediate:!0,deep:!0,handler:function(){this.renderNodes(),this.renderConnections()}},connections:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}},selectionInfo:{immediate:!0,deep:!0,handler:function(){this.renderSelection()}},currentNodes:{immediate:!0,deep:!0,handler:function(){this.$emit("select",this.currentNodes),this.renderNodes()}},currentConnections:{immediate:!0,deep:!0,handler:function(){this.$emit("selectconnection",this.currentConnections),this.renderConnections()}},cursorToChartOffset:{immediate:!0,deep:!0,handler:function(){this.selectionInfo&&this.renderSelection()}},connectingInfo:{immediate:!0,deep:!0,handler:function(){this.renderConnections()}}}},nt=tt,ot=(n("a3bb"),Object(h["a"])(nt,ze,Le,!1,null,null,null)),it=ot.exports,rt={components:{SBDNodeDialog:Xe,ActionDialog:Se,SendDialog:Ne,ReceiveDialog:Ee,Flowchart:it},data:function(){return{connections:[],nodes:[],editableTabsValue:"2",tabIndex:2,nodeForm:{target:null},connectionForm:{target:null,operation:null},nodeDialogVisible:!1,actionDialogVisible:!1,sendDialogVisible:!1,receiveDialogVisible:!1}},methods:{handleAddAction:function(){var e=this,t=Object(l["a"])();this.$refs.chart.add({id:t,x:10,y:10,text:"DoState"+this.$store.state.nodes.find((function(t){return t.id===e.$route.params.id})).SBD.nodes.filter((function(e){return"action"===e.type})).length,type:"action",externalID:t,comment:null,state:null})},handleAddReceive:function(){var e=this,t=Object(l["a"])();this.$refs.chart.add({id:t,x:10,y:10,text:"Receive"+this.$store.state.nodes.find((function(t){return t.id===e.$route.params.id})).SBD.nodes.filter((function(e){return"receive"===e.type})).length,type:"receive",externalID:t,comment:null,state:null})},handleAddSend:function(){var e=this,t=Object(l["a"])();this.$refs.chart.add({id:t,x:10,y:10,text:"Send"+this.$store.state.nodes.find((function(t){return t.id===e.$route.params.id})).SBD.nodes.filter((function(e){return"send"===e.type})).length,type:"send",externalID:t,comment:null,state:null})},handleDblClick:function(e){},handleSelect:function(e){},handleSelectConnection:function(e){},handleChartSave:function(){var e=Object(c["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),handleEditNode:function(e){this.nodeForm.target=e,this.nodeDialogVisible=!0},handleEditConnection:function(e){this.connectionForm.target=e,"action"===e.source.type?this.actionDialogVisible=!0:"send"===e.source.type?this.sendDialogVisible=!0:"receive"===e.source.type&&(this.receiveDialogVisible=!0)}},computed:{}},st=rt,at=(n("875b"),Object(h["a"])(st,ve,be,!1,null,"5647d1ea",null)),ct=at.exports;o["default"].use(C["a"]);var lt=new C["a"]({mode:"history",base:"/PASS/",routes:[{path:"/sbd/:id",name:"SBD",component:ct},{path:"/",name:"home",component:ge},{path:"/about",name:"about",component:function(){return n.e("about").then(n.bind(null,"f820"))}}]});o["default"].use(g.a),o["default"].use(r.a),o["default"].config.productionTip=!1,new o["default"]({el:"#app",mounted:function(){},store:x,router:lt,components:{App:p}})},6020:function(e,t,n){var o=n("ad93");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("5e74b029",o,!0,{sourceMap:!1,shadowMode:!1})},"6f5b":function(e,t,n){var o=n("4cab");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("3f4a764b",o,!0,{sourceMap:!1,shadowMode:!1})},"74ee":function(e,t,n){"use strict";n("dd38")},8175:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"#svg{background-size:20px 20px,20px 20px,10px 10px,10px 10px;background-image:linear-gradient(90deg,#dfdfdf 1px,transparent 0),linear-gradient(180deg,#dfdfdf 1px,transparent 0),linear-gradient(90deg,#f1f1f1 1px,transparent 0),linear-gradient(180deg,#f1f1f1 1px,transparent 0);background-position:left -1px top -1px,left -1px top -1px,left -1px top -1px,left -1px top -1px}#chart,#svg{height:100%;width:100%}#chart{position:fixed;left:1px;border:1px solid #dfdfdf}#position{position:absolute;right:4px}.unselectable{moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.connector{cursor:crosshair;opacity:0}.connector.active{opacity:1;fill:#fff;stroke:#bbb;stroke-width:1px}.connector:hover{stroke:red}#svg .selection{stroke:#add8e6;fill:#add8e6;fill-opacity:.8;display:none}#svg .selection.active{display:block}",""])},8412:function(e,t,n){"use strict";n("26aa")},"875b":function(e,t,n){"use strict";n("6f5b")},"95df":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,"#svg{background-size:20px 20px,20px 20px,10px 10px,10px 10px;background-image:linear-gradient(90deg,#dfdfdf 1px,transparent 0),linear-gradient(180deg,#dfdfdf 1px,transparent 0),linear-gradient(90deg,#f1f1f1 1px,transparent 0),linear-gradient(180deg,#f1f1f1 1px,transparent 0);background-position:left -1px top -1px,left -1px top -1px,left -1px top -1px,left -1px top -1px}#chart,#svg{height:100%;width:100%}#chart{position:fixed;left:1px;border:1px solid #dfdfdf}#position{position:absolute;right:4px}.unselectable{moz-user-select:-moz-none;-moz-user-select:none;-o-user-select:none;-khtml-user-select:none;-webkit-user-select:none;-ms-user-select:none;user-select:none}.connector{cursor:crosshair;opacity:0}.connector.active{opacity:1;fill:#fff;stroke:#bbb;stroke-width:1px}.connector:hover{stroke:red}#svg .selection{stroke:#add8e6;fill:#add8e6;fill-opacity:.8;display:none}#svg .selection.active{display:block}",""])},"9b5f":function(e,t,n){"use strict";n("52fd")},"9cea":function(e,t,n){"use strict";n("3bfa")},a3bb:function(e,t,n){"use strict";n("37ad")},aba6:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".button-new-tag,.el-tag{margin-left:10px;margin-right:10px;margin-top:5px}.button-new-tag{height:32px;line-height:30px;padding-top:0;padding-bottom:0}.input-new-tag{width:100px;margin-top:5px;margin-left:10px;margin-right:10px;vertical-align:bottom}",""])},ad93:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".el-switch[data-v-98a7d764]{padding-left:10px;padding-right:10px}.text-label[data-v-98a7d764]{margin-left:5px;margin-right:10px;margin-top:10px}.text-label-switch[data-v-98a7d764]{margin-left:20px;margin-right:10px;margin-top:5px;margin-bottom:5px}.SID-input[data-v-98a7d764]{padding-left:15px;padding-right:10px}",""])},af38:function(e,t,n){var o=n("4c80");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("6ae92528",o,!0,{sourceMap:!1,shadowMode:!1})},b856:function(e,t,n){var o=n("dbd0");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("092ba03d",o,!0,{sourceMap:!1,shadowMode:!1})},d3b2:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".import[data-v-0c374eed]{left:94%}.export[data-v-0c374eed],.import[data-v-0c374eed]{position:fixed;top:6%}.export[data-v-0c374eed]{left:90%}.toolbar[data-v-0c374eed]{margin-left:12px;margin-bottom:12px}.title[data-v-0c374eed]{margin-bottom:0}#toolbar>button[data-v-0c374eed]{margin-right:4px;margin-left:10px}.container[data-v-0c374eed]{width:100%}.tabs[data-v-0c374eed]{margin-left:1px}",""])},dbd0:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".text-label[data-v-5e81b791]{margin-left:15px;margin-right:10px}.text-label-select[data-v-5e81b791]{margin-left:30px;margin-right:10px}.SBD-input[data-v-5e81b791]{padding-left:15px;padding-right:10px}.text-label-switch[data-v-5e81b791]{margin-left:15px;margin-right:10px;margin-top:10px}",""])},dd38:function(e,t,n){var o=n("e589");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("4b386c08",o,!0,{sourceMap:!1,shadowMode:!1})},e57d:function(e,t,n){var o=n("0481");o.__esModule&&(o=o.default),"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var i=n("499e").default;i("db280a68",o,!0,{sourceMap:!1,shadowMode:!1})},e589:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".text-label-switch{margin-left:15px;margin-right:10px;margin-top:10px}",""])},f8cc:function(e,t,n){"use strict";n("e57d")},fdba:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".text-label{margin-left:15px;margin-right:10px;margin-top:10px}.SBD-select{padding-left:10px;padding-right:10px}",""])}});
//# sourceMappingURL=app.c8705e7b.js.map